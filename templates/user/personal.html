{% extends "base.html" %}
{% block content %}

<section id="login-section">
  <div class="container">
    <div class="row">
      <div class="col-md-6">
        <h2>{{ username }}'s Profile</h2>
      </div>       
    </div>
 </div>      

  <!-- Recipe cards -->
  <div class="container">
    <div class="row top-margins">
      <div class="col s12 center-align">
        {% for recipe in recipes if session.user|lower == recipe.recipe_created_by|lower %}
        <div class="card mb-3">
            <img src="{{ recipe.recipe_image_1 }}" alt="Image of {{ recipe.recipe_name }}" loading="lazy"  class="card-img-top">
            <h5 class="card-title">{{ recipe.recipe_name }}</h5>
            <p class="card-text">{{ recipe.recipe_overview }}<br><br>
              Preparation time about {{ recipe.recipe_preparation_time }} minutes.<br><br>
              Recipe for {{ recipe.recipe_servings }} persons.
            </p>
          </div>
          <div class="btn-group btn-group-lg" role="group" aria-label="Go to recipe">
            <a href="{{ url_for('specific_recipe', recipe_id=recipe._id) }}"
              class="btn btn-primary center-align recipe-margins">
              Go to recipe
            </a>
            <br>
            {% if session.user|lower == recipe.recipe_created_by|lower %}
            <a href="{{ url_for('edit_recipe', recipe_id=recipe._id) }}"
              class="btn btn-info center-align recipe-margins">
              Edit recipe </a>
            <button data-target="{{ recipe._id }}" type="button"
              class="modal-trigger btn btn-warning center-align recipe-margins">
              Delete recipe  </button>
          </div>
        </div>
        <!-- Delete Recipe Modal -->
        <div id="{{ recipe._id }}" class="modal">
          <div class="modal-content">
            <h4 class="card-header">Pay attention!</h4>
            <p class="center-align">
              You are about to delete your recipe, this can not be undone!
              Are you sure you want to delete this recipe?
            </p>
          </div>
          <div class="modal-footer">
            <a href="#!" class="modal-action modal-close btn-flat">
              <span class="text-keep">No, cancel!</span>
            </a>
            <a href="{{ url_for('delete_recipe', recipe_id=recipe._id) }}" data-target="{{ recipe._id }}"
              class="modal-action modal-close btn-flat">
              <span class="text-delete">Yes, delete!</span>
            </a>
          </div>
          {% endif %}
        </div>
        {% else %}
        <h4 class="no-results-text">You haven't added any recipes yet!</h4>
        <h5><a href="{{ url_for('add_recipe') }}" class="btn btn-secondary"> Start adding your recipes today</a></h5>
        {% endfor %}
      </div>
    </div>
  </div>
</section>
{% endblock %}